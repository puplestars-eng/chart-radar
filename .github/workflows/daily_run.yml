name: Daily Stock Analysis

# ì–¸ì œ ì‹¤í–‰í• ê¹Œìš”?
on:
  schedule:
    # í•œêµ­ ì‹œê°„ ì•„ì¹¨ 8ì‹œ (UTC 23:00)
    - cron: '0 23 * * *'
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼ (í…ŒìŠ¤íŠ¸ìš©)

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ (ì½”ë“œ ê°€ì ¸ì˜¤ê¸°)
      uses: actions/checkout@v3

    - name: íŒŒì´ì¬ ì„¤ì • (3.9 ë²„ì „)
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
      run: |
        pip install finance-datareader pandas requests openpyxl scikit-learn beautifulsoup4 plotly yfinance streamlit lxml
        

    - name: ì£¼ì‹ ë¶„ì„ ì‹¤í–‰ (ì—¬ê¸°ê°€ í•µì‹¬!)
      # ğŸš¨ ì¤‘ìš”: ì—‘ì…€ ë§Œë“œëŠ” íŒŒì¼ëª…ì´ radar.pyê°€ ë§ë‚˜ìš”? ì•„ë‹ˆë©´ ìˆ˜ì •í•´ì£¼ì„¸ìš”!
      env:  # ğŸ‘ˆ ì—¬ê¸°ë¶€í„° ì¶”ê°€! (ë“¤ì—¬ì“°ê¸° ì£¼ì˜)
        BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
        CHAT_ID: ${{ secrets.CHAT_ID }}
      run: |
        python radar.py

    - name: ê²°ê³¼ ì €ì¥ ë° í‡´ê·¼ (Commit & Push)
      run: |
        git config --global user.name "GitHub Action Bot"
        git config --global user.email "actions@github.com"
        git add *.xlsx
        git commit -m "ğŸ¤– ë¡œë´‡ì´ ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ!" || echo "ë³€ê²½ ì‚¬í•­ ì—†ìŒ"
        git push
